<form id="payment-form">
  <label for="plan">Select Plan:</label>
  <select id="plan" required>
    <option value="">--Choose an option--</option>
    <option value="video only">Video - £4.50</option>
    <option value="basic">Basic - £15/month</option>
    <option value="premium">Premium - £25/month</option>
  </select>

  <label for="card">Card Number:</label>
  <input type="text" id="card" placeholder="1234 5678 9012 3456" required>

  <label for="expiry">Expiry Date:</label>
  <input type="text" id="expiry" placeholder="MM/YY" required>

  <label for="cvv">CVV:</label>
  <input type="text" id="cvv" placeholder="123" required>

  <button type="submit">Pay Now</button>
</form>

<script>
const form = document.getElementById("payment-form");
const params = new URLSearchParams(window.location.search);
const videoId = params.get("video"); // "1", "2", "3"

form.addEventListener("submit", (e) => {
  e.preventDefault();

  const payButton = form.querySelector("button");
  payButton.textContent = "Processing Payment...";
  payButton.disabled = true;

  setTimeout(() => {
    if (videoId) {
      // Store unlocked workout in localStorage
      let unlocked = JSON.parse(localStorage.getItem("unlockedWorkouts")) || [];
      if (!unlocked.includes(videoId)) {
        unlocked.push(videoId);
        localStorage.setItem("unlockedWorkouts", JSON.stringify(unlocked));
      }

      // Redirect to dynamic unlock page
      window.location.href = `unlock-workout.html?video=${videoId}`;
    } else {
      alert("No workout selected!");
      payButton.textContent = "Pay Now";
      payButton.disabled = false;
    }
  }, 800);
});
</script>
